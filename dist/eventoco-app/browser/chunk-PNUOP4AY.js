import{a as h,b as k,c as T}from"./chunk-PF4ZS6AY.js";import{a as re}from"./chunk-NUOE3SLZ.js";import{c as A,j as W,k as H,m as J,n as K,o as Q,p as X,q as Y,t as Z,u as $,v as ee,w as te,y as ne,z as ie}from"./chunk-KJAQ6TVI.js";import{$a as E,Aa as C,Gb as w,Hb as B,Ib as G,Oa as u,Qa as m,Sa as i,T as O,Ta as n,Ua as g,Va as V,Wa as f,Xa as b,Ya as I,Za as d,_a as D,ab as M,ba as _,bb as S,ca as P,eb as q,fb as j,ja as x,ka as v,qa as R,za as a}from"./chunk-HJJGDG5F.js";function de(t,e){if(t&1&&(i(0,"div",1)(1,"h2"),d(2,"Datos del Usuario"),n(),i(3,"div",2)(4,"div",3)(5,"label",4),d(6,"ID"),n(),g(7,"input",5),n(),i(8,"div",3)(9,"label",6),d(10,"Nombre de Usuario"),n(),g(11,"input",7),n()(),i(12,"div",3)(13,"label",8),d(14,"Email"),n(),g(15,"input",9),n(),i(16,"div",2)(17,"div",3)(18,"label",10),d(19,"Tel\xE9fono"),n(),g(20,"input",11),n(),i(21,"div",3)(22,"label",12),d(23,"Cumplea\xF1os"),n(),g(24,"input",13),q(25,"date"),n()()()),t&2){let l=b();a(7),m("value",l.user.id),a(4),m("value",l.user.username),a(4),m("value",l.user.email),a(5),m("value",l.user.phone),a(4),m("value",j(25,5,l.user.birthday,"mediumDate"))}}var F=(()=>{let e=class e{constructor(o){this.userService=o}ngOnInit(){this.loadUser()}loadUser(){let o=localStorage.getItem("userId");o&&this.userService.getUserById(+o).subscribe({next:r=>{this.user=r,console.log("Los datos del usuario han sido cargados correctamente:",this.user)},error:r=>{console.error("La sesi\xF3n ha sido cerrada",r)}})}};e.\u0275fac=function(r){return new(r||e)(C(h))},e.\u0275cmp=_({type:e,selectors:[["app-user-details"]],inputs:{user:"user"},decls:1,vars:1,consts:[["class","user-details",4,"ngIf"],[1,"user-details"],[1,"flex-container"],[1,"form-group"],["for","user-id"],["type","text","id","user-id","readonly","",1,"form-control",3,"value"],["for","username"],["type","text","id","username","readonly","",1,"form-control",3,"value"],["for","email"],["type","text","id","email","readonly","",1,"form-control",3,"value"],["for","phone"],["type","text","id","phone","readonly","",1,"form-control",3,"value"],["for","birthday"],["type","text","id","birthday","readonly","",1,"form-control",3,"value"]],template:function(r,s){r&1&&u(0,de,26,8,"div",0),r&2&&m("ngIf",s.user)},dependencies:[w,B],styles:[".user-details[_ngcontent-%COMP%]{border:1px solid #ccc;padding:16px;border-radius:20px;max-width:400px;margin:auto;background-color:#f5ede7;font-family:Outfit}.user-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;font-size:24px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-size:14px;color:#555}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;border:1px solid #ddd;border-radius:6px;background-color:#c8c1c1}.form-control[_ngcontent-%COMP%]:focus{border-color:#aaa;outline:none}.form-control[readonly][_ngcontent-%COMP%]{background-color:#ddd4d4}.flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.flex-item[_ngcontent-%COMP%]{flex:1;margin-right:10px}.flex-item[_ngcontent-%COMP%]:last-child{margin-right:0}"]});let t=e;return t})();function pe(t,e){t&1&&(i(0,"div"),d(1," Campo obligatorio. "),n())}function ce(t,e){t&1&&(i(0,"div"),d(1," El nombre de usuario debe tener entre 4 y 20 car\xE1cteres. "),n())}function ue(t,e){if(t&1&&(i(0,"div",17),u(1,pe,2,0,"div",18)(2,ce,2,0,"div",18),n()),t&2){b();let l=I(4);a(),m("ngIf",l.controls.username==null||l.controls.username.errors==null?null:l.controls.username.errors.required),a(),m("ngIf",(l.controls.username==null||l.controls.username.errors==null?null:l.controls.username.errors.minlength)||(l.controls.username==null||l.controls.username.errors==null?null:l.controls.username.errors.maxlength))}}function ge(t,e){t&1&&(i(0,"div",17),d(1," Campo obligatorio. "),n())}function fe(t,e){t&1&&(i(0,"div"),d(1," Campo obligatorio. "),n())}function be(t,e){t&1&&(i(0,"div"),d(1," El email debe ser v\xE1lido. "),n())}function _e(t,e){if(t&1&&(i(0,"div",17),u(1,fe,2,0,"div",18)(2,be,2,0,"div",18),n()),t&2){b();let l=I(4);a(),m("ngIf",l.controls.email==null||l.controls.email.errors==null?null:l.controls.email.errors.required),a(),m("ngIf",l.controls.email==null||l.controls.email.errors==null?null:l.controls.email.errors.email)}}function xe(t,e){t&1&&(i(0,"div",17),d(1," Campo obligatorio. "),n())}function ve(t,e){t&1&&(i(0,"div",17),d(1," Campo obligatorio. "),n())}var L=(()=>{let e=class e{constructor(o){this.userService=o}ngOnInit(){}onSubmit(o){if(o.valid){let r={username:o.value.username,password:o.value.password,email:o.value.email,phone:o.value.phone,birthday:o.value.birthday};this.userService.updateUser(this.user.id,r).subscribe({next:()=>{console.log("Datos actualizados correctamente."),window.location.reload()},error:s=>{console.error("Error al editar datos del usuario",s)}})}}};e.\u0275fac=function(r){return new(r||e)(C(h))},e.\u0275cmp=_({type:e,selectors:[["app-edit-user"]],inputs:{user:"user"},decls:33,vars:10,consts:[["userForm","ngForm"],[1,"edit-user"],[3,"ngSubmit"],[1,"flex-container"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","required","","minlength","4","maxlength","20","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","name","password","required","","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","","email","","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["for","phone"],["type","text","id","phone","name","phone","required","","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["for","birthday"],["type","date","id","birthday","name","birthday","required","","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"error"],[4,"ngIf"]],template:function(r,s){if(r&1){let p=V();i(0,"div",1)(1,"h2"),d(2,"Editar Usuario"),n(),i(3,"form",2,0),f("ngSubmit",function(){x(p);let c=I(4);return v(s.onSubmit(c))}),i(5,"div",3)(6,"div",4)(7,"label",5),d(8,"Nombre de Usuario"),n(),i(9,"input",6),S("ngModelChange",function(c){return x(p),M(s.user.username,c)||(s.user.username=c),v(c)}),n(),u(10,ue,3,2,"div",7),n(),i(11,"div",4)(12,"label",8),d(13,"Contrase\xF1a"),n(),i(14,"input",9),S("ngModelChange",function(c){return x(p),M(s.user.password,c)||(s.user.password=c),v(c)}),n(),u(15,ge,2,0,"div",7),n()(),i(16,"div",4)(17,"label",10),d(18,"Email"),n(),i(19,"input",11),S("ngModelChange",function(c){return x(p),M(s.user.email,c)||(s.user.email=c),v(c)}),n(),u(20,_e,3,2,"div",7),n(),i(21,"div",4)(22,"label",12),d(23,"Telefono"),n(),i(24,"input",13),S("ngModelChange",function(c){return x(p),M(s.user.phone,c)||(s.user.phone=c),v(c)}),n(),u(25,xe,2,0,"div",7),n(),i(26,"div",4)(27,"label",14),d(28,"Cumplea\xF1os"),n(),i(29,"input",15),S("ngModelChange",function(c){return x(p),M(s.user.birthday,c)||(s.user.birthday=c),v(c)}),n(),u(30,ve,2,0,"div",7),n(),i(31,"button",16),d(32,"Guardar"),n()()()}if(r&2){let p=I(4);a(9),E("ngModel",s.user.username),a(),m("ngIf",p.submitted&&(p.controls.username==null?null:p.controls.username.invalid)),a(4),E("ngModel",s.user.password),a(),m("ngIf",p.submitted&&(p.controls.password==null?null:p.controls.password.invalid)),a(4),E("ngModel",s.user.email),a(),m("ngIf",p.submitted&&(p.controls.email==null?null:p.controls.email.invalid)),a(4),E("ngModel",s.user.phone),a(),m("ngIf",p.submitted&&(p.controls.phone==null?null:p.controls.phone.invalid)),a(4),E("ngModel",s.user.birthday),a(),m("ngIf",p.submitted&&(p.controls.birthday==null?null:p.controls.birthday.invalid))}},dependencies:[w,Y,H,J,K,Z,ee,te,$,X,Q],styles:[".edit-user[_ngcontent-%COMP%]{border:1px solid #ccc;padding:16px;border-radius:20px;max-width:400px;margin:auto;background-color:#f5ede7;font-family:Outfit}.edit-user[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;font-size:24px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-size:14px;color:#555}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;border:1px solid #ddd;border-radius:6px;background-color:#e0e0e0}.error[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:5px}.btn[_ngcontent-%COMP%]{display:block;width:50%;margin:auto;padding:10px;background-color:#f60;border:none;color:#fff;border-radius:40px;font-size:16px;cursor:pointer}.flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.flex-item[_ngcontent-%COMP%]{flex:1;margin-right:10px}.flex-item[_ngcontent-%COMP%]:last-child{margin-right:0}"]});let t=e;return t})();var N=(()=>{let e=class e{constructor(o){this.userService=o,this.userDeleted=new R}confirmDelete(){confirm(`\xBFSeguro de que quieres borrar el usuario ${this.user.username}?`)&&this.userService.deleteUser(this.user.id).subscribe({next:()=>{this.userDeleted.emit(this.user.id),localStorage.removeItem("userId"),window.location.reload()},error:r=>{console.error("Error al borrar usuario",r)}})}};e.\u0275fac=function(r){return new(r||e)(C(h))},e.\u0275cmp=_({type:e,selectors:[["app-delete-user"]],inputs:{user:"user"},outputs:{userDeleted:"userDeleted"},decls:2,vars:0,consts:[[1,"btn","btn-danger",3,"click"]],template:function(r,s){r&1&&(i(0,"button",0),f("click",function(){return s.confirmDelete()}),d(1,"Eliminar Usuario"),n())},styles:[".btn-danger[_ngcontent-%COMP%]{background-color:#993d00;color:#fff;padding:10px 20px;font-size:16px;text-decoration:none;border:none;border-radius:20px;margin-left:10px;cursor:pointer}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#fff;color:#993d00;padding:8px 18px;border:2px solid #993d00}"]});let t=e;return t})();var le=(()=>{let e=class e{constructor(){}logout(){confirm(`\xBFSeguro de que quieres cerrar la sesi\xF3n de ${this.user.username}?`)&&(localStorage.removeItem("userId"),window.location.reload())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=_({type:e,selectors:[["app-logout-user"]],inputs:{user:"user"},decls:3,vars:0,consts:[[1,"text-right"],[1,"btn","btn-primary",3,"click"]],template:function(r,s){r&1&&(i(0,"div",0)(1,"button",1),f("click",function(){return s.logout()}),d(2," Cerrar Sesi\xF3n"),n()())},styles:[".btn-primary[_ngcontent-%COMP%]{color:#d35400;background-color:transparent;padding:8px 18px;font-size:16px;text-decoration:none;border:2px solid #d56520;border-radius:20px;margin-left:10px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#ebc7cb;color:#d35400}"]});let t=e;return t})();function Ee(t,e){t&1&&g(0,"app-login-user")}function Me(t,e){t&1&&g(0,"app-register-user")}function Se(t,e){if(t&1){let l=V();i(0,"div")(1,"button",5),f("click",function(){x(l);let r=b();return v(r.toggleLoginForm())}),d(2),n(),u(3,Ee,1,0,"app-login-user",0),i(4,"button",6),f("click",function(){x(l);let r=b();return v(r.toggleRegisterForm())}),d(5),n(),u(6,Me,1,0,"app-register-user",0),n()}if(t&2){let l=b();a(2),D(" ",l.isLoginVisible?"Calcelar inicio de sesi\xF3n":"Iniciar Sesi\xF3n"," "),a(),m("ngIf",l.isLoginVisible),a(2),D(" ",l.isRegisterVisible?"Calcelar registro":"Registrarse"," "),a(),m("ngIf",l.isRegisterVisible)}}function we(t,e){if(t&1&&(i(0,"div"),g(1,"app-logout-user",1),n()),t&2){let l=b();a(),m("user",l.user)}}function Ue(t,e){if(t&1&&g(0,"app-edit-user",1),t&2){let l=b();m("user",l.user)}}var se=(()=>{let e=class e{constructor(o){this.userService=o,this.isEditVisible=!1,this.isRegisterVisible=!1,this.isLoginVisible=!1}ngOnInit(){let o=localStorage.getItem("userId");o&&this.userService.getUserById(+o).subscribe(r=>{this.user=r})}toggleEditForm(){this.isEditVisible=!this.isEditVisible}toggleRegisterForm(){this.isRegisterVisible=!this.isRegisterVisible}toggleLoginForm(){this.isLoginVisible=!this.isLoginVisible}isLoggedIn(){return!!localStorage.getItem("userId")}onUserDeleted(o){this.user=null,this.userService.deleteUser(o).subscribe(()=>{console.log(`User with ID ${o} has been deleted.`),localStorage.removeItem("userId")})}};e.\u0275fac=function(r){return new(r||e)(C(h))},e.\u0275cmp=_({type:e,selectors:[["app-user"]],decls:11,vars:6,consts:[[4,"ngIf"],[3,"user"],[1,"btn","btn-edit",3,"click"],[3,"user",4,"ngIf"],[3,"userDeleted","user"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(r,s){r&1&&(i(0,"div"),u(1,Se,7,4,"div",0)(2,we,2,1,"div",0),g(3,"p"),n(),i(4,"div"),g(5,"app-user-details",1),n(),i(6,"div")(7,"button",2),f("click",function(){return s.toggleEditForm()}),d(8),n(),u(9,Ue,1,1,"app-edit-user",3),i(10,"app-delete-user",4),f("userDeleted",function(y){return s.onUserDeleted(y)}),n()()),r&2&&(a(),m("ngIf",!s.isLoggedIn()),a(),m("ngIf",s.isLoggedIn()),a(3),m("user",s.user),a(3),D(" ",s.isEditVisible?"Calcelar edici\xF3n":"Editar"," "),a(),m("ngIf",s.isEditVisible),a(),m("user",s.user))},dependencies:[w,T,F,L,N,k,le],styles:[".button-container[_ngcontent-%COMP%]{margin-top:20px}.button-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:10px}.user-details-container[_ngcontent-%COMP%], .user-action-container[_ngcontent-%COMP%]{margin-top:20px}.btn-primary[_ngcontent-%COMP%]{color:#d35400;background-color:transparent;padding:8px 18px;font-size:16px;text-decoration:none;border:2px solid #d56520;border-radius:20px;margin-left:10px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#ebc7cb;color:#d35400}.btn-danger[_ngcontent-%COMP%]{background-color:#d35400;color:#fff;padding:10px 20px;font-size:16px;text-decoration:none;border:none;border-radius:20px;margin-left:10px;cursor:pointer}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#fff;color:#d35400;padding:8px 18px;border:2px solid #d56520}.btn-edit[_ngcontent-%COMP%]{background-color:#df7a37;color:#fff;padding:10px 20px;font-size:16px;text-decoration:none;border:none;border-radius:20px;margin-left:10px;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#fff;color:#df7a37;padding:8px 18px;border:2px solid #df7a37}"]});let t=e;return t})();var Ie=[{path:"",component:se},{path:"details",component:F},{path:"register",component:T},{path:"edit",component:L},{path:"login",component:k},{path:"delete",component:N}],ae=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=P({type:e}),e.\u0275inj=O({imports:[W.forChild(Ie),W]});let t=e;return t})();var mt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=P({type:e}),e.\u0275inj=O({imports:[G,ae,ne,re,ie,A]});let t=e;return t})();export{mt as a};
